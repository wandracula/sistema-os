<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Produtos e Servi√ßos</title>

<style>
body { margin:0; font-family: Arial; background:#f1f5f9; display:flex }
.sidebar {
  width:240px; background:#0f172a; color:#fff;
  padding:20px; height:100vh; position:fixed
}
.sidebar a { color:#fff; display:block; padding:12px; text-decoration:none }
.sidebar a:hover { background:#334155 }
.main { margin-left:240px; padding:30px; width:100% }
.card { background:#fff; padding:20px; border-radius:12px }
input, textarea, select, button {
  width:100%; padding:10px; margin-top:8px
}
table { width:100%; border-collapse:collapse; margin-top:20px }
th,td { border:1px solid #ccc; padding:8px }
img { width:80px; border-radius:6px }
button { background:#2563eb; color:#fff; border:none; cursor:pointer }
</style>
</head>

<body>

<div class="sidebar">
  <h3>üõ† Sistema OS</h3>
  <a href="index.html">Entrada</a>
  <a href="clientes.html">Clientes</a>
  <a href="visualizar-os.html">OS</a>
  <a href="financeiro.html">Financeiro</a>
  <a href="produtos.html">Produtos</a>
</div>

<div class="main">
  <div class="card">
    <h3>Cadastro de Produto / Servi√ßo</h3>

    <input id="nome" placeholder="Nome">
    <textarea id="descricao" placeholder="Descri√ß√£o"></textarea>
    <input id="valor" type="number" placeholder="Valor R$">
    <input id="foto" placeholder="URL da imagem">
    <select id="categoria">
      <option value="produto">Produto</option>
      <option value="servico">Servi√ßo</option>
    </select>

    <button onclick="salvar()">Salvar</button>

    <table>
      <thead>
        <tr>
          <th>Foto</th><th>Nome</th><th>Valor</th><th>Categoria</th>
        </tr>
      </thead>
      <tbody id="lista"></tbody>
    </table>
  </div>
</div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
import { getFirestore, collection, addDoc, getDocs } from
"https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

const firebaseConfig = {
  apiKey: "AIzaSyBSQrG5bdCGC_6kUQxccgJxz2gtLiB2Kb4",
  authDomain: "sistema-os-1284b.firebaseapp.com",
  projectId: "sistema-os-1284b",
  storageBucket: "sistema-os-1284b.appspot.com",
  messagingSenderId: "1032102605721",
  appId: "1:1032102605721:web:7eba5fc6e4eb9fc17ad908"
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

window.salvar = async () => {
  if (!nome.value || !valor.value) return alert("Preencha nome e valor");

  await addDoc(collection(db,"produtos"),{
    nome:nome.value,
    descricao:descricao.value,
    valor:Number(valor.value),
    foto:foto.value,
    categoria:categoria.value,
    ativo:true
  });

  nome.value=""; descricao.value=""; valor.value=""; foto.value="";
  carregar();
};

async function carregar(){
  lista.innerHTML="";
  const snap = await getDocs(collection(db,"produtos"));
  snap.forEach(d=>{
    const p=d.data();
    lista.innerHTML+=`
      <tr>
        <td><img src="${p.foto||'https://via.placeholder.com/80'}"></td>
        <td>${p.nome}</td>
        <td>R$ ${p.valor.toFixed(2)}</td>
        <td>${p.categoria}</td>
      </tr>
    `;
  });
}
carregar();
</script>

</body>
</html>
